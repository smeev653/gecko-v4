change_government_to_gc_ethiopia_Government = {
	if = {
		limit = {
			NOT = { government = gc_ethiopian_government }
		}
		if = {
			limit = {
				government = republic
			}
			change_government = gc_ethiopian_government
			lose_reforms = 4
		}
		else = {
			change_government = gc_ethiopian_government
			lose_reforms = 2
		}
	}
}

develop_adm = {
	if = {
		limit = {
			owner = {
				has_estate_privilege = estate_gc_priv_12
			}
		}
		random = {
			chance = 25
			add_base_tax = 1
		}
	}
}	

subject_warscore = {
	if = { 
		limit = {
			is_subject = yes
			NOT = { is_colonial_nation = yes }
			ai = yes
			any_owned_province = {
				NOT = { has_province_modifier = subject_warscore }
			}		
		}
		every_owned_province = {
			limit = {
				NOT = { has_province_modifier = subject_warscore }
			}
			add_province_modifier = {
				name = subject_warscore
				duration = -1
				hidden = yes
			}
		}
	}
}

gecko_ipa_effect = {
	if = {
		limit = {
			NOT = { num_of_loans = 1 }
		}
		remove_country_modifier = gecko_ipa
		remove_country_modifier = gecko_debt_tackled
		remove_country_modifier = gecko_debt_tackled_2
	}
}

gecko_mercs = {
	if = {
		limit = {	
			has_country_modifier = Minor
		}
		hidden_effect = {
			export_to_variable = {
					which = geckomercFL
					value = land_forcelimit
					who = ROOT
			}
			divide_variable = {
					which = geckomercFL
					value = 100
			}
			multiply_variable = {
					which = geckomercFL
					value = 25
			}
			change_variable = {
					which = geckomercFL
					value = 30
			}
			if = {
							limit = {
								has_country_modifier = We_stand_alone
								NOT = {has_idea = gc_compagnies_ordonnance}
								NOT = {has_idea = gc_mass_army}
								NOT = { has_age_ability = ab_burgundy_merc_manpower }
								NOT = { has_age_ability = ab_hesse_mercs}
								
							}
								multiply_variable = { 
									which = geckomercFL
									value = 1.1
								}
						}
			if = {
							limit = {
								OR = {
									has_idea = gc_compagnies_ordonnance
									has_idea = gc_mass_army
								}
								NOT = { has_age_ability = ab_burgundy_merc_manpower }
								NOT = { has_age_ability = ab_hesse_mercs}
								NOT = { has_country_modifier = We_stand_alone}
							}
								multiply_variable = { 
									which = geckomercFL
									value = 1.1
								}
						}
						if = {
							limit = {
								OR = {
									has_idea = gc_compagnies_ordonnance
									has_idea = gc_mass_army
								}
								OR = {
									has_age_ability = ab_burgundy_merc_manpower
									has_age_ability = ab_hesse_mercs
								}
								NOT = { has_country_modifier = We_stand_alone}
							}
								multiply_variable = { 
									which = geckomercFL
									value = 1.2
								}
						}
						if = {
							limit = {
								OR = {
									has_idea = gc_compagnies_ordonnance
									has_idea = gc_mass_army
								}
								has_country_modifier = We_stand_alone
								NOT = {has_age_ability = ab_burgundy_merc_manpower}
								NOT = {has_age_ability = ab_hesse_mercs}
							}
								multiply_variable = { 
									which = geckomercFL
									value = 1.2
								}
						}
						if = {
							limit = {
								OR = {
									has_idea = gc_compagnies_ordonnance
									has_idea = gc_mass_army
								}
								OR = {
									has_age_ability = ab_burgundy_merc_manpower
									has_age_ability = ab_hesse_mercs
								}
								has_country_modifier = We_stand_alone
							}
								multiply_variable = { 
									which = geckomercFL
									value = 1.3
								}
						}
			else = {
				#nothing
			}	
			export_to_variable = {
						which = geckomercvalue
						value = trigger_value:num_of_mercenaries
						who = ROOT
			}
		}	
	}
	else_if = {
		limit = {
			NOT = { has_country_modifier = Minor }
		}
		hidden_effect = {
			export_to_variable = {
					which = geckomercFL
					value = land_forcelimit
					who = ROOT
			}
			divide_variable = {
					which = geckomercFL
					value = 100
			}
			multiply_variable = {
					which = geckomercFL
					value = 25
			}
			change_variable = {
					which = geckomercFL
					value = 20
			}
				if = {
							limit = {
								has_country_modifier = We_stand_alone
								NOT = {has_idea = gc_compagnies_ordonnance}
								NOT = {has_idea = gc_mass_army}
								NOT = { has_age_ability = ab_burgundy_merc_manpower }
								NOT = { has_age_ability = ab_hesse_mercs}
								
							}
								multiply_variable = { 
									which = geckomercFL
									value = 1.1
								}
						}
				if = {
							limit = {
								OR = {
									has_idea = gc_compagnies_ordonnance
									has_idea = gc_mass_army
								}
								NOT = { has_age_ability = ab_burgundy_merc_manpower }
								NOT = { has_age_ability = ab_hesse_mercs}
								NOT = { has_country_modifier = We_stand_alone}
							}
								multiply_variable = { 
									which = geckomercFL
									value = 1.1
								}
						}
						if = {
							limit = {
								OR = {
									has_idea = gc_compagnies_ordonnance
									has_idea = gc_mass_army
								}
								OR = {
									has_age_ability = ab_burgundy_merc_manpower
									has_age_ability = ab_hesse_mercs
								}
								NOT = { has_country_modifier = We_stand_alone}
							}
								multiply_variable = { 
									which = geckomercFL
									value = 1.2
								}
						}
						if = {
							limit = {
								OR = {
									has_idea = gc_compagnies_ordonnance
									has_idea = gc_mass_army
								}
								has_country_modifier = We_stand_alone
								NOT = {has_age_ability = ab_burgundy_merc_manpower}
								NOT = {has_age_ability = ab_hesse_mercs}
							}
								multiply_variable = { 
									which = geckomercFL
									value = 1.2
								}
						}
						if = {
							limit = {
								OR = {
									has_idea = gc_compagnies_ordonnance
									has_idea = gc_mass_army
								}
								OR = {
									has_age_ability = ab_burgundy_merc_manpower
									has_age_ability = ab_hesse_mercs
								}
								has_country_modifier = We_stand_alone
							}
								multiply_variable = { 
									which = geckomercFL
									value = 1.3
								}
						}
			else = {
				#nothing
			}
			export_to_variable = {
						which = geckomercvalue
						value = trigger_value:num_of_mercenaries
						who = ROOT
			}
		}
	}
}



add_or_upgrade_university_building = {
	custom_tooltip = add_or_upgrade_university_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = university
			}
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
		else = {
			add_building = university
		}
	}
}

add_or_upgrade_trade_building = {
	custom_tooltip = add_or_upgrade_trade_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = marketplace
			}
			add_building = trade_depot
		}
		else_if = {
			limit = {
				has_building = trade_depot
			}
			add_building = stock_exchange
		}
		else_if = {
			limit = {
				has_building = stock_exchange
			}
			add_base_tax = 1
			add_base_production = 1
		}
		else = {
			add_building = marketplace
		}
	}
}

add_or_upgrade_tax_building = {
	custom_tooltip = add_or_upgrade_tax_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = temple
			}
			add_building = cathedral
		}
		else_if = {
			limit = {
				has_building = cathedral
			}
			add_base_tax = 2
		}
		else = {
			add_building = temple
		}
	}
}

add_or_upgrade_production_building = {
	custom_tooltip = add_or_upgrade_production_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = workshop
			}
			add_building = counting_house
		}
		else_if = {
			limit = {
				has_building = counting_house
			}
			add_base_production = 2
		}
		else = {
			add_building = workshop
		}
	}
}

add_or_upgrade_dock_building = {
	custom_tooltip = add_or_upgrade_dock_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = dock
			}
			add_building = drydock
		}
		else_if = {
			limit = {
				has_building = drydock
			}
			ROOT = { add_sailors = 0.5 }
		}
		else = {
			add_building = dock
		}
	}
}

add_or_upgrade_shipyard_building = {
	custom_tooltip = add_or_upgrade_shipyard_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = shipyard
			}
		}
		else_if = {
			limit = {
				has_building = grand_shipyard 
			}
			ROOT = { add_sailors = 0.5 }
		}
		else = {
			add_building = shipyard
		}
	}
}

add_or_upgrade_manpower_building = {
	custom_tooltip = add_or_upgrade_manpower_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = barracks
			}
			add_building = training_fields  
		}
		else_if = {
			limit = {
				has_building = training_fields  
			}
			add_base_tax = 1
			add_base_manpower = 1
		}
		else = {
			add_building = barracks
		}
	}
}

add_or_upgrade_forcelimit_building = {
	custom_tooltip = add_or_upgrade_forcelimit_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = regimental_camp
			}
			add_building = conscription_center   
		}
		else_if = {
			limit = {
				has_building = conscription_center   
			}
			add_base_manpower = 2
		}
		else = {
			add_building = regimental_camp
		}
	}
}

add_or_upgrade_university_building = {
	custom_tooltip = add_or_upgrade_university_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = university
			}
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
		else = {
			add_building = university
		}
	}
}

add_or_upgrade_courthouse_building = {
	custom_tooltip = add_or_upgrade_courthouse_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = courthouse
			}
			add_building = town_hall   
		}
		else_if = {
			limit = {
				has_building = town_hall   
			}
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
		else = {
			add_building = courthouse
		}
	}
}

add_or_upgrade_fort_building = {
	custom_tooltip = add_or_upgrade_fort_building_tt
	hidden_effect = {
		if = {
			limit = {
				has_building = fort_15th
			}
			add_building = fort_16th
		}
		else_if = {
			limit = {
				has_building = fort_16th
			}
			add_building = fort_17th
		}
		else_if = {
			limit = {
				has_building = fort_17th
			}
			add_building = fort_18th
		}
		else_if = {
			limit = {
				has_building = fort_18th
			}
			add_base_manpower = 3
		}
		else = {
			add_building = fort_15th
		}
	}
}

change_national_focus_effect = {
	if = {
		limit = {
			OR = {
				has_dlc = "Res Publica"
				has_dlc = "Common Sense"
			}
		}
		custom_tooltip = ME_CHANGE_NATIONAL_FOCUS_TT
		hidden_effect = {
			country_event = { id = missions_expanded_events.2 }
		}
	}
}
## breaks the alliance between current scope and who
### break_alliance_with = { who = <scope> }
break_alliance_with = {
	if = {
		limit = {
			alliance_with = $who$
		}
		$who$ = {
			custom_tooltip = BREAK_ALLIANCE_WITH_TT
		}
		hidden_effect = {
			add_rival = $who$
			remove_rival = $who$
		}
	}
}

# province scope
## add manufactory in scope
### build_possible_manufactory_in_province = yes
build_possible_manufactory_in_province = {
	custom_tooltip = BUILD_MATCHING_MANUFACTORY_IN_THIS_PROVINCE
	hidden_effect = {
		if = {
			limit = {
				has_no_manufactory_trigger = yes
			}
			if = {
				limit = {
					OR = {
						trade_goods = naval_supplies
						trade_goods = fish
						trade_goods = salt
					}
				}
				if = {
					limit = {
						ROOT = { dip_tech = 11 }
					}
					add_building = wharf
				}
				else = {
					ROOT = { add_dip_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = copper
						trade_goods = iron
					}
				}
				if = {
					limit = {
						ROOT = { mil_tech = 11 }
					}
					add_building = weapons
				}
				else = {
					ROOT = { add_mil_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = wool
						trade_goods = cloth
						trade_goods = silk
						trade_goods = dyes
					}
				}
				if = {
					limit = {
						ROOT = { adm_tech = 11 }
					}
					add_building = textile
				}
				else = {
					ROOT = { add_adm_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = coffee
						trade_goods = cotton
						trade_goods = sugar
						trade_goods = tobacco
						trade_goods = tea
						trade_goods = cocoa
					}
				}
				if = {
					limit = {
						ROOT = { adm_tech = 14 }
					}
					add_building = plantations
				}
				else = {
					ROOT = { add_adm_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = ivory
						trade_goods = slaves
						trade_goods = spices
						trade_goods = fur
						trade_goods = incense
					}
				}
				if = {
					limit = {
						ROOT = { dip_tech = 14 }
					}
					add_building = tradecompany
				}
				else = {
					ROOT = { add_dip_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = grain
						trade_goods = livestock
						trade_goods = wine
					}
				}
				if = {
					limit = {
						ROOT = { adm_tech = 6 }
					}
					add_building = farm_estate
				}
				else = {
					ROOT = { add_adm_power = 20 }
				}
			}
			else_if = {
				limit = {
					OR = {
						trade_goods = paper
						trade_goods = gems
						trade_goods = tropical_wood
						trade_goods = glass
						trade_goods = chinaware
					}
				}
				if = {
					limit = {
						ROOT = { adm_tech = 16 }
					}
					add_building = mills
				}
				else = {
					ROOT = { add_adm_power = 20 }
				}
			}
			else_if = {
				limit = {
					has_dlc = "Rule Britannia"
					trade_goods = coal
				}
				if = {
					limit = {
						ROOT = { adm_tech = 21 }
					}
					add_building = furnace
				}
				else = {
					ROOT = { add_adm_power = 20 }
				}
			}
			else = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
		}
		else = {
			add_base_tax = 1
			add_base_production = 1
			add_base_manpower = 1
		}
	}
}